GER = { # Germany
	flag_definition = {
		coa = GER_modern
		subject_canton = GER_modern
	}
	flag_definition = {
		coa = GER_modern
		subject_canton = GER_modern
		priority = 10
		trigger = { 
			coa_def_republic_flag_trigger = yes
		}
	}
	flag_definition = {
		coa = GER_dictatorship
		subject_canton = GER_dictatorship
		priority = 15
		trigger = { 
			coa_def_dictatorship_flag_trigger = yes
		}
	}
	flag_definition = {
		coa = GER_spartakist
		subject_canton = GER_spartakist
		priority = 2000
		trigger = { 
			coa_def_communist_flag_trigger = yes
			NOR ={
			coa_def_commune_flag_trigger = yes
			coa_def_anarchy_flag_trigger = yes
			}
		}
	}
	
	flag_definition = {
		coa = GER_communist_commune
		priority = 1500
		trigger = { 
			coa_def_communist_flag_trigger = yes
			OR = {
			coa_def_commune_flag_trigger = yes
			coa_def_anarchy_flag_trigger = yes
			}
		}
	}		
	flag_definition = {
		coa = GER_ddr
		subject_canton = GER_ddr
		priority = 1500
		trigger = { 
			scope:actor = {
				OR = {
					AND = {
						has_law = law_type:law_single_party_state
						py:communist_party = {
							any_member = {
								is_in_government = yes
							}
						}
					}
					AND = {
						OR = {
							has_law = law_type:law_autocracy
							has_law = law_type:law_technocracy
							has_law = law_type:law_oligarchy
						}
						any_scope_character = {
							is_ruler = yes
							OR = {
								has_ideology = ideology:ideology_communist
								has_ideology = ideology:ideology_vanguardist
								has_ideology = ideology:ideology_anarchist
							}
						}
					}
					AND = {
						is_subject = yes
						overlord = {
							has_law = law_type:law_council_republic
						}
					}
				}
				OR = {
					has_law = law_type:law_parliamentary_republic
					has_law = law_type:law_presidential_republic
				}
			}
		}
	}
	flag_definition = {
		coa = GER_fascist
		subject_canton = GER_fascist
		priority = 1250
		trigger = { 
			coa_def_fascist_flag_trigger = yes
		}
	}

### country-specific Germany variants ###

	flag_definition = {
		coa = GER_bavarian
		subject_canton = GER_bavarian
		priority = 100
		trigger = {
			exists = scope:actor
			scope:actor = {
				has_law = law_type:law_monarchy
				was_formed_from = BAV
			}
		}
	}	
	flag_definition = {
		coa = GER_austrian
		subject_canton = GER
		priority = 100
		trigger = {
			exists = scope:actor
			scope:actor = {
				has_law = law_type:law_monarchy
				was_formed_from = AUS
			}
		}
	}	

	flag_definition = {
		coa = GER_saxon
		subject_canton = GER_saxon
		priority = 100
		trigger = {
			exists = scope:actor
			scope:actor = {
				has_law = law_type:law_monarchy
				was_formed_from = SAX
			}
		}
	}

	flag_definition = {
		coa = GER_saxon_monarchist
		subject_canton = GER_saxon_monarchist
		priority = 150
		trigger = {
			coa_def_absolute_monarchy_flag_trigger = yes
			exists = scope:actor
			scope:actor = {
				was_formed_from = SAX
			}
		}
	}

	flag_definition = {
		coa = GER_hannover
		subject_canton = GER_hannover
		priority = 100
		trigger = {
			exists = scope:actor
			scope:actor = {
				has_law = law_type:law_monarchy
				was_formed_from = HAN
			}
		}
	}

	flag_definition = {
		coa = GER_wurttemberg
		subject_canton = GER_wurttemberg
		priority = 100
		trigger = {
			exists = scope:actor
			scope:actor = {
				has_law = law_type:law_monarchy
				was_formed_from = WUR
			}
		}
	}
	
	# Black-White-Red tricolor is reserved for a Prussian monarchy
	flag_definition = {
		coa = GER
		subject_canton = GER
		priority = 100
		trigger = {
			exists = scope:actor
			scope:actor = {
				has_law = law_type:law_monarchy
				was_formed_from = PRU
			}
		}
	}
	flag_definition = {
		coa = GER_iron_cross
		subject_canton = GER_iron_cross
		priority = 5
		trigger = {
			coa_def_autocracy_flag_trigger = yes
			exists = scope:actor
			scope:actor = {
				was_formed_from = PRU
			}
		}
	}	
	flag_definition = {
		coa = GER_nihilist
		subject_canton = GER_nihilist
		priority = 1500
		trigger = { 
			coa_def_nihilist_flag_trigger = yes
		}
	}
	
	flag_definition = {
		coa = GER_communist_commune
		priority = 1500
		trigger = { 
			coa_def_communist_flag_trigger = yes
			OR = {
			coa_def_commune_flag_trigger = yes
			coa_def_anarchy_flag_trigger = yes
			}
		}
	}	
}

CHI = { # China
	flag_definition = {
		coa = CHI_han_empire
		coa_with_overlord_canton = CHI_han_empire
		priority = 5
		trigger = { 
			scope:actor = {
				NOT = { country_has_primary_culture = cu:manchu }
				has_law = law_type:law_monarchy
			}
		}
	}
	flag_definition = {
		coa = CHI
		subject_canton = CHI
		coa_with_overlord_canton = CHI_subject
		allow_overlord_canton = yes		
		priority = 1
	}
	flag_definition = {
		coa = CHI_absolute_monarchy
		subject_canton = CHI_absolute_monarchy
		coa_with_overlord_canton = CHI_subject
		allow_overlord_canton = yes				
		priority = 20
		trigger = { 
			coa_def_absolute_monarchy_flag_trigger = yes
		}
	}	
	flag_definition = {
		coa = CHI_republic
		subject_canton = CHI_republic
		allow_overlord_canton = yes
		priority = 10
		trigger = { 
			coa_def_republic_flag_trigger = yes
		}
	}	
	flag_definition = {
		coa = CHI_dictatorship
		subject_canton = CHI_dictatorship
		priority = 20
		trigger = {
			coa_def_dictatorship_flag_trigger = yes
		}
	}	
	flag_definition = {
		coa = CHI_theocracy
		subject_canton = CHI_theocracy
		subject_canton = CHI_absolute_monarchy
		priority = 20
		trigger = { 
			coa_def_theocracy_flag_trigger = yes
		}
	}	
	flag_definition = {
		coa = CHI_communist
		priority = 1500
		trigger = { 
			coa_def_communist_flag_trigger = yes
			NOR = {
			coa_def_commune_flag_trigger = yes
			coa_def_anarchy_flag_trigger = yes
			}			
		}
	}
	flag_definition = {
		coa = CHI_communist_commune
		priority = 2000
		trigger = { 
			coa_def_communist_flag_trigger = yes
			OR = {
			coa_def_commune_flag_trigger = yes
			coa_def_anarchy_flag_trigger = yes
			}			
		}
	}
	flag_definition = {
		coa = CHI_techsoc
		priority = 2000
		trigger = { 
			coa_def_communist_flag_trigger = yes
            coa_def_technocracy_trigger = yes
		}
	}	
}

RUS = { # Russia
	flag_definition = {
		coa = RUS_imperial
		allow_overlord_canton = yes		
		subject_canton = RUS_imperial
		priority = 1
	}
	flag_definition = {
		coa = RUS_absolute_monarchy
		subject_canton = RUS 
		priority = 20
		trigger = { 
			coa_def_absolute_monarchy_flag_trigger = yes
		}
	}	
	flag_definition = {
		coa = RUS_republic
		subject_canton = RUS_republic
		priority = 10
		trigger = { 
			coa_def_republic_flag_trigger = yes
		}
	}		
	flag_definition = {
		coa = RUS_dictatorship
		subject_canton = RUS_dictatorship
		priority = 20
		trigger = {
			coa_def_dictatorship_flag_trigger = yes
		}
	}	
	flag_definition = {
		coa = RUS_oligarchy
		subject_canton = RUS_oligarchy
		priority = 25
		trigger = {
			coa_def_oligarchy_flag_trigger = yes
		}
	}	
	
	flag_definition = {
		coa = RUS_soviet_republic
		priority = 1500 # need to override the DEFAULT
		trigger = { 
			coa_def_communist_flag_trigger = yes
			NOT = { coa_def_multicultural_trigger = yes }
		}
	}
	
#	flag_definition = {
#		coa = RUS_soviet_union
#		priority = 1750 # need to override the DEFAULT
#		trigger = { 
#			coa_def_communist_flag_trigger = yes
#            coa_def_multicultural_trigger = yes 
#			NOT = { coa_def_commune_flag_trigger = yes }
#		}
#	}
#	
#	flag_definition = {
#		coa = RUS_soviet_union_internationale
#		priority = 2000 # need to override the DEFAULT
#		trigger = { 
#			coa_def_communist_flag_trigger = yes
#			coa_def_commune_flag_trigger = yes
#            coa_def_multicultural_trigger = yes 
#		}
#	}
	
	flag_definition = {
		coa = RUS_fascist
		subject_canton = RUS_fascist
		priority = 1500
		trigger = { 
			coa_def_fascist_flag_trigger = yes
		}
	}	
	flag_definition = {
		coa = RUS_theocracy
		subject_canton = RUS_theocracy
		priority = 20
		trigger = { 
			coa_def_theocracy_flag_trigger = yes
		}
	}	
}

FRA = { # France
	flag_definition = {
		coa = FRA
		subject_canton = FRA
		allow_overlord_canton = yes
		coa_with_overlord_canton = FRA_subject		
		priority = 1
	}
	flag_definition = {
		coa = FRA
		subject_canton = FRA
		allow_overlord_canton = yes		
		overlord_canton_scale = { 0.337 0.337 }			
		priority = 10
		trigger = { 
			coa_def_republic_flag_trigger = yes
		}
	}	
	flag_definition = {
		coa = FRA_dictatorship
		subject_canton = FRA_dictatorship
		priority = 20
		trigger = {
			coa_def_dictatorship_flag_trigger = yes
		}
	}
	flag_definition = {
		coa = FRA_bourbon
		subject_canton = FRA_bourbon
		priority = 30
		allow_overlord_canton = yes
		coa_with_overlord_canton = FRA_subject			
		trigger = {	
			scope:actor ?= {
				has_law = law_type:law_monarchy
				has_variable = legitimist_restoration_var
			}
		}
	}
	flag_definition = {
		coa = FRA_absolute_monarchy
		subject_canton = FRA_absolute_monarchy	
		allow_overlord_canton = yes
		coa_with_overlord_canton = FRA_subject			
		priority = 25
		trigger = {
			coa_def_absolute_monarchy_flag_trigger = yes
		}
	}	
	flag_definition = {
		coa = FRA_second_empire
		subject_canton = FRA
		allow_overlord_canton = yes
		coa_with_overlord_canton = FRA_subject			
		priority = 30
		trigger = {
			scope:actor ?= {
				has_law = law_type:law_monarchy
				has_variable = bonapartist_restoration_var
			}
		}
	}	
	flag_definition = {
		coa = FRA_theocracy
		subject_canton = FRA_theocracy
		priority = 20
		trigger = { 
			coa_def_theocracy_flag_trigger = yes
		}
	}
	flag_definition = {
		coa = FRA_communist
		subject_canton = FRA_communist
		priority = 1500
		trigger = { 
			coa_def_communist_flag_trigger = yes
		}
	}
	flag_definition = {
		coa = FRA_military
		subject_canton = FRA_military
		priority = 1500
		trigger = { 
			coa_def_military_junta_flag_trigger = yes
		}
	}	
	flag_definition = {
		coa = FRA_fascist
		subject_canton = FRA_fascist
		priority = 1550
		trigger = { 
			coa_def_fascist_flag_trigger = yes
		}
	}
	flag_definition = {
		coa = FRA_communist_internationale
		subject_canton = FRA_communist
		priority = 2000
		trigger = {
			coa_def_communist_flag_trigger = yes
			coa_def_commune_flag_trigger = yes
		}
	}		
}

SOV = { 
	flag_definition = {
		coa = SOV
	}

	flag_definition = {
		coa = SOV_republic
		priority = 10
		trigger = { 
			coa_def_republic_flag_trigger = yes
		}
	}

	flag_definition = {
		coa = SOV_communist
		priority = 1200
		trigger = { 
			coa_def_communist_flag_trigger = yes
		}
	}	
	flag_definition = {
		coa = SOV_communist_commune
		priority = 2000
		trigger = { 
			coa_def_communist_flag_trigger = yes
			coa_def_commune_flag_trigger = yes
		}
	}	
}